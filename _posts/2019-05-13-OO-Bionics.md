---
layout:     post
title:      面向对象和仿生学
subtitle:   关于设计的概念、抽象与边界
date:       2019-05-13
author:     BigTall
header-img: img/post-bg-sunset.jpg
catalog: true
tags:
    - 思想
    - 面向对象
    - 设计
---

若干年前和一个高水平客户讨论了很多关于元数据的内容。在这位大师级客户的元数据模型里，世界被抽象成了资源和宿主，资源中再进行分层，按照特征划分，分解出对象、规则、事件；宿主则分为个人和法人。几个有限的基本元素之间各司其职，构成了世界的千变万化。这个模型非常优雅，可以解释大多数的业务运作过程，所以它是一个有效的模型。只可惜因为商务的关系未能深入合作，最后我的这位客户找了一个合作方，天天开会对牛弹琴，不知道这几年下来，有没有出现能够听得懂他的谈话，并且将其落地的人。

但是这次沟通引发了我的一个观点：软件开发其实也是【仿生学】。

传统的仿生学，其实就是仿照动植物的各种形态，最典型的就是四足步行车。但是软件的【仿生】行为，则是对自然和社会运作的仿真和模拟。最典型的就是日渐没落的OA系统，通过模拟一个组织内部的审批过程，让信息流可以快速流转、存储和分析。它的模拟对象就是信息和各种流转接点，以及节点与信息、节点与节点之间的关系，（一些高级的OA系统可能会涉及信息与信息之间的关系建模，但通常都不会有，仅限于消息回复时候的引用而已）。

很自然会引出一个问题：什么样的模型可以模拟整个社会？也就是说，我们通过这个模型，理论上就可以模拟整个社会的运作，并且模型可以转化为可以支撑业务系统，甚至本身就是可执行的。这样我们可以用一种语言，一个平台统一天下所有的程序。“PHP is best”自然也就没人再说了。

嗯，理论上可以。但是我们至少可以在这篇文章里略微畅想一下，假如真的这种模型已经存在了，软件设计会发生什么样的有趣变化。

首先，是设计的边界很容易界定。每一个业务模块就好比是一块石头，对外可以看到的石头的颜色、大小都是其表现属性；通过抓握石头的几个对应的点，可以将石头移动；通过敲击、刻画等事件，评估石头的响声和刻画痕迹，可以知道它的一些内部状况，例如硬度。通过X光等第三方设备，可以分析石头内部的元素和质量分布等。大家看自然界的各种组合方式，比现在的软件要优雅和简单得多，但是最终呈现的复杂特征，却又是现代软件远远无法描述完整的。说明现代软件的描述能力，还需要继续演进，远未到我们可以停止分析和思考的时候。

其次，彻底理解“事件”在“面向对象”系统中的地位以及相互关系。当你和同事们喝得醉醺醺地走在大街上，连手里的酒瓶掉落都没有察觉的时候，路人的眼光却从清脆响声中，齐刷刷地落在了你的地中海上。这个例子充分说明了：自然界中事物之间的中远距相互作用，是通过事件传递的。而接收到事件与否，则要看当事人是否在这个“场”内，或者把“场”换成“事件订阅”可能更容易懂一些。

第三，对于多个物体之间的交互作用，参考自然界的提醒，可以设计出更稳定的交互模式。我以前曾经思考过“司机”对象和“汽车”对象的关系，我们在实现语义接口的时候，到底是“司机开汽车”还是“汽车被司机开”，还是有一点讲究的。在“司机开汽车”的语义环境中，API接口是 `driver.drive(car)`。而“汽车被司机开”这个语义中，API定义是 `car.driveBy(driver)`。看似效果一样，实际主体完全不同。这个问题我们可以单独展开讨论。

第四，交互的新模式。现在的交互模式显然太繁琐了，每一个人造物品，都需要操作者知道大量的细节才可以操作，甚至需要知道被操作对象的内部状态，而且有越来越烦琐的趋势。实际上，社会的运作过程中，并不要求发起者必须知道接受者的内部状态，这是交互的基本要求。例如你随时可以给10086打电话，并不需要知道人家手头有多少件事情在做；甲方也可以随时向乙方提要求，并不需要例会乙方是否已经忙成了996还是007。

如果我们仔细想，还会想到很多。对我来说，在软件设计时候，将设计拟人化、拟物化，最大的好处是可以获得简洁的交互模式。实际工作中，我们在思考模式的时候，被技术因素干扰得实在是太多了，多到了让我们以为这一切是天经地义的。






